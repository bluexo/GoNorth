(function(n){"use strict";(function(t){(function(t){t.ViewModel=function(){this.themes=ace.require("ace/ext/themelist").themes;this.codeEditorTheme=new ko.observable(null);this.isLoading=new ko.observable(!1);this.errorOccured=new ko.observable(!1);this.loadUserPreferences()};t.ViewModel.prototype={loadUserPreferences:function(){this.isLoading(!0);this.errorOccured(!1);var n=this;jQuery.ajax({url:"/api/UserPreferencesApi/GetUserPreferences",type:"GET"}).done(function(t){for(var i=0;i<n.themes.length;++i)if(n.themes[i].theme==t.codeEditorTheme){n.codeEditorTheme(n.themes[i]);break}n.isLoading(!1)}).fail(function(){n.isLoading(!1);n.errorOccured(!0)})},save:function(){var i,t;if(!this.codeEditorTheme){this.errorOccured(!0);return}i={codeEditorTheme:this.codeEditorTheme().theme};this.isLoading(!0);this.errorOccured(!1);t=this;jQuery.ajax({url:"/api/UserPreferencesApi/SaveUserPreferences",headers:n.Util.generateAntiForgeryHeader(),data:JSON.stringify(i),type:"POST",contentType:"application/json"}).done(function(){t.isLoading(!1)}).fail(function(){t.isLoading(!1);t.errorOccured(!0)})}}})(t.Preferences=t.Preferences||{})})(n.Manage=n.Manage||{})})(window.GoNorth=window.GoNorth||{});