(function(n){"use strict";(function(n){(function(n){n.PlayAnimationAction="PlayAnimationAction";n.SetNpcStateAction="SetNpcStateAction"})(n.ConfigKeys=n.ConfigKeys||{})})(n.Tale=n.Tale||{})})(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(t){(function(t){t.TextAreaConfigSection=function(n,t,i){this.configKey=n;this.title=t;this.description=i;this.configData=new ko.observable;this.isLoading=new ko.observable(!1);this.errorOccured=new ko.observable(!1);this.isExpanded=new ko.observable(!1);this.loadConfig()};t.TextAreaConfigSection.prototype={loadConfig:function(){var n=this;this.isLoading(!0);this.errorOccured(!1);jQuery.ajax("/api/TaleApi/GetNodeConfigByKey?configKey="+encodeURIComponent(this.configKey)).done(function(t){var i,u,r;if(n.isLoading(!1),!t){n.configData("");return}try{for(i="",u=JSON.parse(t),r=0;r<u.length;++r)i&&(i+="\n"),i+=u[r];n.configData(i)}catch(f){n.errorOccured(!0)}}).fail(function(){n.isLoading(!1);n.errorOccured(!0)})},saveConfig:function(){var i=[],t;this.configData()&&(i=this.configData().split("\n"));this.isLoading(!0);this.errorOccured(!1);t=this;jQuery.ajax({url:"/api/TaleApi/SaveNodeConfigByKey?configKey="+encodeURIComponent(this.configKey),headers:n.Util.generateAntiForgeryHeader(),data:JSON.stringify(i),type:"POST",contentType:"application/json"}).done(function(){t.isLoading(!1)}).fail(function(){t.isLoading(!1);t.errorOccured(!0)})},toggleVisibility:function(){this.isExpanded(!this.isExpanded())}}})(t.Config=t.Config||{})})(n.Tale=n.Tale||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(t){(function(i){i.ViewModel=function(){this.animationConfigSection=new i.TextAreaConfigSection(t.ConfigKeys.PlayAnimationAction,i.Localization.AnimationConfigSectionHeader,i.Localization.AnimationConfigSectionDescription);this.stateConfigSection=new i.TextAreaConfigSection(t.ConfigKeys.SetNpcStateAction,i.Localization.StateConfigSectionHeader,i.Localization.StateConfigSectionDescription);this.isReadonly=new ko.observable(!1);this.lockedByUser=new ko.observable("");this.errorOccured=new ko.observable(!1);this.acquireLock()};i.ViewModel.prototype={acquireLock:function(){var t=this;n.LockService.acquireLock("TaleConfig","").done(function(n,i){n&&(t.isReadonly(!0),t.lockedByUser(i))}).fail(function(){t.errorOccured(!0);t.isReadonly(!0)})}}})(t.Config=t.Config||{})})(n.Tale=n.Tale||{})}(window.GoNorth=window.GoNorth||{});