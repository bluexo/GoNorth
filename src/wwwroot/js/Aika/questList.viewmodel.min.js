(function(n){"use strict";(function(t){(function(t){var i=50;t.ViewModel=function(){var i=0,r=parseInt(n.Util.getParameterFromUrl("page")),t;isNaN(r)||(i=r);t=n.Util.getParameterFromUrl("searchTerm");t||(t="");this.currentPage=new ko.observable(i);this.quests=new ko.observableArray;this.hasMore=new ko.observable(!1);this.isLoading=new ko.observable(!1);this.prevLoading=new ko.observable(!1);this.nextLoading=new ko.observable(!1);this.searchPattern=new ko.observable(t);this.searchPatternToUse=t;this.errorOccured=new ko.observable(!1);this.loadPage()};t.ViewModel.prototype={searchQuests:function(){this.searchPatternToUse=this.searchPattern();this.currentPage(0);this.nextLoading(!0);this.loadPage()},loadPage:function(){var t=this,r;this.errorOccured(!1);this.isLoading(!0);r="page="+this.currentPage();this.searchPatternToUse&&(r+="&searchTerm="+encodeURIComponent(this.searchPatternToUse));n.Util.replaceUrlParameters(r);jQuery.ajax("/api/AikaApi/GetQuests?searchPattern="+this.searchPatternToUse+"&start="+this.currentPage()*i+"&pageSize="+i).done(function(n){t.quests(n.quests);t.hasMore(n.hasMore);t.isLoading(!1);t.prevLoading(!1);t.nextLoading(!1)}).fail(function(){t.errorOccured(!0);t.isLoading(!1)})},prevPage:function(){this.currentPage(this.currentPage()-1);this.prevLoading(!0);this.loadPage()},nextPage:function(){this.currentPage(this.currentPage()+1);this.nextLoading(!0);this.loadPage()},createNewQuest:function(){window.location="/Aika/Quest"},buildQuestUrl:function(n){return"/Aika/Quest?id="+n.id}}})(t.QuestList=t.QuestList||{})})(n.Aika=n.Aika||{})})(window.GoNorth=window.GoNorth||{});