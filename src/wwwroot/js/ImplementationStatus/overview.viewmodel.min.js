(function(n){"use strict";(function(t){(function(t){t.ViewModel=function(){this.isOpen=new ko.observable(!1);var n=this;this.isOpen.subscribe(function(t){!t&&n.markAsImplementedPromise&&n.markAsImplementedPromise.reject()});this.objectName=new ko.observable("");this.isLoading=new ko.observable(!1);this.errorOccured=new ko.observable(!1);this.markAsImplementedPromise=null;this.flagAsImplementedMethodUrlPostfix=null;this.doesSnapshotExists=new ko.observable(!1);this.difference=new ko.observableArray};t.ViewModel.prototype={openNpcCompare:function(n,t){return this.isOpen(!0),this.objectName(t?t:""),this.flagAsImplementedMethodUrlPostfix="FlagNpcAsImplemented?npcId="+n,this.loadCompareResult("CompareNpc?npcId="+n)},openItemCompare:function(n,t){return this.isOpen(!0),this.objectName(t?t:""),this.flagAsImplementedMethodUrlPostfix="FlagItemAsImplemented?itemId="+n,this.loadCompareResult("CompareItem?itemId="+n)},openSkillCompare:function(n,t){return this.isOpen(!0),this.objectName(t?t:""),this.flagAsImplementedMethodUrlPostfix="FlagSkillAsImplemented?skillId="+n,this.loadCompareResult("CompareSkill?skillId="+n)},openDialogCompare:function(n,t){return this.isOpen(!0),this.objectName(t?t:""),this.flagAsImplementedMethodUrlPostfix="FlagDialogAsImplemented?dialogId="+n,this.loadCompareResult("CompareDialog?dialogId="+n)},openQuestCompare:function(n,t){return this.isOpen(!0),this.objectName(t?t:""),this.flagAsImplementedMethodUrlPostfix="FlagQuestAsImplemented?questId="+n,this.loadCompareResult("CompareQuest?questId="+n)},openMarkerCompare:function(n,t,i){return this.isOpen(!0),this.objectName(""),this.flagAsImplementedMethodUrlPostfix="FlagMarkerAsImplemented?mapId="+n+"&markerId="+t+"&markerType="+i,this.loadCompareResult("CompareMarker?mapId="+n+"&markerId="+t+"&markerType="+i)},loadCompareResult:function(n){this.isLoading(!0);this.errorOccured(!1);this.difference([]);var t=this;return jQuery.ajax({url:"/api/ImplementationStatusApi/"+n,type:"GET"}).done(function(n){t.isLoading(!1);t.addExpandedObservable(n.compareDifference);t.doesSnapshotExists(n.doesSnapshotExist);n.compareDifference&&t.difference(n.compareDifference)}).fail(function(){t.isLoading(!1);t.errorOccured(!0)}),this.markAsImplementedPromise=new jQuery.Deferred,this.markAsImplementedPromise.promise()},addExpandedObservable:function(n){if(n)for(var t=0;t<n.length;++t)n[t].isExpanded=new ko.observable(!0),this.addExpandedObservable(n[t].subDifferences)},toggleCompareResultExpanded:function(n){n.isExpanded(!n.isExpanded())},markAsImplemented:function(){this.isLoading(!0);this.errorOccured(!1);var t=this;jQuery.ajax({url:"/api/ImplementationStatusApi/"+this.flagAsImplementedMethodUrlPostfix,headers:n.Util.generateAntiForgeryHeader(),type:"POST"}).done(function(){window.refreshImplementationStatusList&&window.refreshImplementationStatusList();t.markAsImplementedPromise.resolve();t.markAsImplementedPromise=null;t.isLoading(!1);t.isOpen(!1)}).fail(function(){t.isLoading(!1);t.errorOccured(!0)})},closeDialog:function(){this.isOpen(!1)}}})(t.CompareDialog=t.CompareDialog||{})})(n.ImplementationStatus=n.ImplementationStatus||{})})(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(t){(function(t){t.ImplementationStatusObjectList=function(n,t,i){this.isInitialized=!1;this.hasMarkerTypeRow=!1;this.compareDialog=i;this.initialCompareObjId=null;this.objects=new ko.observableArray;this.hasMore=new ko.observable(!1);this.currentPage=new ko.observable(0);this.isLoading=n;this.prevLoading=new ko.observable(!1);this.nextLoading=new ko.observable(!1);this.errorOccured=t;this.pageSize=50};t.ImplementationStatusObjectList.prototype={loadObjects:function(){var n=new jQuery.Deferred;return n.reject("Not implemented"),n.promise()},openCompareById:function(n){for(var i=this.objects(),t=0;t<i.length;++t)if(i[t].id==n){this.openCompare(i[t]);break}},openCompare:function(n){this.saveCompareIdInUrl(n.id);var t=this;this.openCompareDialog(n).done(function(){t.saveCompareIdInUrl(null);t.loadPage()}).fail(function(){t.saveCompareIdInUrl(null)})},openCompareDialog:function(){},buildObjectUrl:function(){},init:function(){this.savePagingInfoInUrl();this.isInitialized||(this.loadPage(),this.isInitialized=!0)},loadPage:function(){this.savePagingInfoInUrl();this.errorOccured(!1);this.isLoading(!0);var n=this;this.loadObjects().done(function(t){n.objects(t.objects);n.hasMore(t.hasMore);n.resetLoadingState();n.initialCompareObjId&&(n.openCompareById(n.initialCompareObjId),n.initialCompareObjId=null)}).fail(function(){n.errorOccured(!0);n.resetLoadingState()})},resetLoadingState:function(){this.isLoading(!1);this.prevLoading(!1);this.nextLoading(!1)},prevPage:function(){this.currentPage(this.currentPage()-1);this.prevLoading(!0);this.loadPage()},nextPage:function(){this.currentPage(this.currentPage()+1);this.nextLoading(!0);this.loadPage()},manipulateUrlData:function(t,i){var r=window.location.search,u;r?(u=new RegExp("&"+t+"=.*?(&|$)","i"),r=r.substr(1).replace(u,""),i!=null&&(r+="&"+t+"="+i)):r=i!=null?t+"="+i:"";n.Util.replaceUrlParameters(r)},savePagingInfoInUrl:function(){this.manipulateUrlData("page",this.currentPage())},setCurrentPage:function(n){this.currentPage(n)},saveCompareIdInUrl:function(n){this.manipulateUrlData("compareId",n)},setInitialCompareId:function(n){this.initialCompareObjId=n}}})(t.Overview=t.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusNpcList=function(t,i,r){n.ImplementationStatusObjectList.apply(this,[t,i,r])};n.ImplementationStatusNpcList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusNpcList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/KortistoApi/GetNotImplementedNpcs?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.flexFieldObjects,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusNpcList.prototype.openCompareDialog=function(n){return this.compareDialog.openNpcCompare(n.id,n.name)};n.ImplementationStatusNpcList.prototype.buildObjectUrl=function(n){return"/Kortisto/Npc?id="+n.id}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusDialogList=function(t,i,r){n.ImplementationStatusObjectList.apply(this,[t,i,r])};n.ImplementationStatusDialogList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusDialogList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/TaleApi/GetNotImplementedDialogs?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.dialogs,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusDialogList.prototype.openCompareDialog=function(n){return this.compareDialog.openDialogCompare(n.id,n.name)};n.ImplementationStatusDialogList.prototype.buildObjectUrl=function(n){return"/Tale?npcId="+n.relatedObjectId}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusItemList=function(t,i,r){n.ImplementationStatusObjectList.apply(this,[t,i,r])};n.ImplementationStatusItemList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusItemList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/StyrApi/GetNotImplementedItems?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.flexFieldObjects,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusItemList.prototype.openCompareDialog=function(n){return this.compareDialog.openItemCompare(n.id,n.name)};n.ImplementationStatusItemList.prototype.buildObjectUrl=function(n){return"/Styr/Item?id="+n.id}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusSkillList=function(t,i,r){n.ImplementationStatusObjectList.apply(this,[t,i,r])};n.ImplementationStatusSkillList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusSkillList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/EvneApi/GetNotImplementedSkills?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.flexFieldObjects,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusSkillList.prototype.openCompareDialog=function(n){return this.compareDialog.openSkillCompare(n.id,n.name)};n.ImplementationStatusSkillList.prototype.buildObjectUrl=function(n){return"/Evne/Skill?id="+n.id}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusQuestList=function(t,i,r){n.ImplementationStatusObjectList.apply(this,[t,i,r])};n.ImplementationStatusQuestList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusQuestList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/AikaApi/GetNotImplementedQuests?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.quests,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusQuestList.prototype.openCompareDialog=function(n){return this.compareDialog.openQuestCompare(n.id,n.name)};n.ImplementationStatusQuestList.prototype.buildObjectUrl=function(n){return"/Aika/Quest?id="+n.id}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(n){(function(n){n.ImplementationStatusMarkerList=function(t,i,r,u){n.ImplementationStatusObjectList.apply(this,[i,r,u]);this.markerTypes=t;this.hasMarkerTypeRow=!0};n.ImplementationStatusMarkerList.prototype=jQuery.extend({},n.ImplementationStatusObjectList.prototype);n.ImplementationStatusMarkerList.prototype.loadObjects=function(){var n=new jQuery.Deferred;return jQuery.ajax({url:"/api/KartaApi/GetNotImplementedMarkers?&start="+this.currentPage()*this.pageSize+"&pageSize="+this.pageSize,type:"GET"}).done(function(t){n.resolve({objects:t.markers,hasMore:t.hasMore})}).fail(function(){n.reject()}),n.promise()};n.ImplementationStatusMarkerList.prototype.openCompareDialog=function(n){return this.compareDialog.openMarkerCompare(n.mapId,n.id,n.type)};n.ImplementationStatusMarkerList.prototype.buildObjectUrl=function(n){var t="&zoomOnMarkerType="+this.markerTypes[n.type]+"&zoomOnMarkerId="+n.id;return"/Karta?id="+n.mapId+t}})(n.Overview=n.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{}),function(n){"use strict";(function(t){(function(i){var r=0,u=1,f=2,e=3,o=4,s=5;i.ViewModel=function(h,c){var l;this.markerTypes=c;this.compareDialog=new t.CompareDialog.ViewModel;this.isLoading=new ko.observable(!1);this.errorOccured=new ko.observable(!1);this.currentListToShow=new ko.observable(-1);this.isNpcListSelected=new ko.computed(function(){return this.currentListToShow()==r},this);this.isDialogListSelected=new ko.computed(function(){return this.currentListToShow()==u},this);this.isItemListSelected=new ko.computed(function(){return this.currentListToShow()==f},this);this.isSkillListSelected=new ko.computed(function(){return this.currentListToShow()==e},this);this.isQuestListSelected=new ko.computed(function(){return this.currentListToShow()==o},this);this.isMarkerListSelected=new ko.computed(function(){return this.currentListToShow()==s},this);this.npcList=new i.ImplementationStatusNpcList(this.isLoading,this.errorOccured,this.compareDialog);this.dialogList=new i.ImplementationStatusDialogList(this.isLoading,this.errorOccured,this.compareDialog);this.itemList=new i.ImplementationStatusItemList(this.isLoading,this.errorOccured,this.compareDialog);this.skillList=new i.ImplementationStatusSkillList(this.isLoading,this.errorOccured,this.compareDialog);this.questList=new i.ImplementationStatusQuestList(this.isLoading,this.errorOccured,this.compareDialog);this.markerList=new i.ImplementationStatusMarkerList(h,this.isLoading,this.errorOccured,this.compareDialog);var a=parseInt(n.Util.getParameterFromUrl("listType")),y=parseInt(n.Util.getParameterFromUrl("page")),p=n.Util.getParameterFromUrl("compareId"),v=!1;isNaN(a)||(v=this.selectListByType(a,y,p));v||this.selectFirstListWithRights();l=this;n.Util.onUrlParameterChanged(function(){var t=parseInt(n.Util.getParameterFromUrl("listType"));isNaN(t)||t==l.currentListToShow()||l.selectListByType(t,null,null)})};i.ViewModel.prototype={selectNpcList:function(){this.setCurrentListToShow(r);this.npcList.init()},selectDialogList:function(){this.setCurrentListToShow(u);this.dialogList.init()},selectItemList:function(){this.setCurrentListToShow(f);this.itemList.init()},selectSkillList:function(){this.setCurrentListToShow(e);this.skillList.init()},selectQuestList:function(){this.setCurrentListToShow(o);this.questList.init()},selectMarkerList:function(){this.setCurrentListToShow(s);this.markerList.init()},setCurrentListToShow:function(t){this.currentListToShow(t);var i="listType="+t;window.location.search?n.Util.setUrlParameters(i):n.Util.replaceUrlParameters(i)},selectFirstListWithRights:function(){n.ImplementationStatus.Overview.hasKortistoRights?this.selectNpcList():n.ImplementationStatus.Overview.hasTaleRights?this.selectDialogList():n.ImplementationStatus.Overview.hasStyrRights?this.selectItemList():n.ImplementationStatus.Overview.hasEvneRights?this.selectSkillList():n.ImplementationStatus.Overview.hasAikaRights?this.selectQuestList():n.ImplementationStatus.Overview.hasKartaRights&&this.selectMarkerList()},selectListByType:function(t,i,h){return n.ImplementationStatus.Overview.hasKortistoRights&&t==r?(this.setPageFromUrl(this.npcList,i),this.setInitialCompareIdFromUrl(this.npcList,h),this.selectNpcList(),!0):n.ImplementationStatus.Overview.hasTaleRights&&t==u?(this.setPageFromUrl(this.dialogList,i),this.setInitialCompareIdFromUrl(this.dialogList,h),this.selectDialogList(),!0):n.ImplementationStatus.Overview.hasStyrRights&&t==f?(this.setPageFromUrl(this.itemList,i),this.setInitialCompareIdFromUrl(this.itemList,h),this.selectItemList(),!0):n.ImplementationStatus.Overview.hasEvneRights&&t==e?(this.setPageFromUrl(this.skillList,i),this.setInitialCompareIdFromUrl(this.skillList,h),this.selectSkillList(),!0):n.ImplementationStatus.Overview.hasAikaRights&&t==o?(this.setPageFromUrl(this.questList,i),this.setInitialCompareIdFromUrl(this.questList,h),this.selectQuestList(),!0):n.ImplementationStatus.Overview.hasKartaRights&&t==s?(this.setPageFromUrl(this.markerList,i),this.setInitialCompareIdFromUrl(this.markerList,h),this.selectMarkerList(),!0):!1},setPageFromUrl:function(n,t){n==null||isNaN(t)||t==null||n.setCurrentPage(t)},setInitialCompareIdFromUrl:function(n,t){n!=null&&t!=null&&n.setInitialCompareId(t)}}})(t.Overview=t.Overview||{})})(n.ImplementationStatus=n.ImplementationStatus||{})}(window.GoNorth=window.GoNorth||{});